# v2.0.0 系统升级测试验证清单

## 测试信息

- **版本号**：v2.0.0
- **测试日期**：2025-11-09
- **测试人员**：_____________
- **测试环境**：开发环境 / 测试环境 / 生产环境（请勾选）

---

## 一、数据库升级测试

### 1.1 SQL脚本执行测试

**测试目标**：验证数据库升级脚本是否成功执行

| 测试项 | 测试步骤 | 预期结果 | 实际结果 | 状态 |
|-------|---------|---------|---------|------|
| 主升级脚本 | 执行`v2.0.0_student_login_and_dept_structure.sql` | 成功执行，无错误 | | ☐ 通过 ☐ 失败 |
| 热修复补丁 | 执行`v2.0.0_hotfix_dept_conflict.sql` | 成功执行，无错误 | | ☐ 通过 ☐ 失败 |
| 菜单隐藏 | 查询`sys_menu`表，menu_id=2043-2048 | visible='1', status='1' | | ☐ 通过 ☐ 失败 |
| 部门创建 | 查询`sys_dept`表，dept_id>=500 | 创建了10个班级部门 | | ☐ 通过 ☐ 失败 |
| 字段添加 | 查询`t_user_profile`表结构 | 存在`dept_id`字段 | | ☐ 通过 ☐ 失败 |
| 测试账号 | 查询`sys_user`表，user_id>=1000 | 创建了3个测试账号 | | ☐ 通过 ☐ 失败 |

**SQL验证命令**：
```sql
-- 检查菜单隐藏
SELECT menu_id, menu_name, visible, status FROM sys_menu WHERE menu_id BETWEEN 2043 AND 2048;

-- 检查部门创建
SELECT dept_id, dept_name, parent_id, ancestors FROM sys_dept WHERE dept_id >= 500 ORDER BY dept_id;

-- 检查字段添加
DESC t_user_profile;

-- 检查测试账号
SELECT user_id, user_name, nick_name, dept_id FROM sys_user WHERE user_id >= 1000;
```

---

## 二、后端功能测试

### 2.1 实体类测试

| 测试项 | 测试步骤 | 预期结果 | 实际结果 | 状态 |
|-------|---------|---------|---------|------|
| TUserProfile实体 | 检查`TUserProfile.java`是否有`deptId`字段 | 存在字段及getter/setter | | ☐ 通过 ☐ 失败 |
| SysUser注解 | 检查`SysUser.java`的@Excel注解 | 包含prompt提示信息 | | ☐ 通过 ☐ 失败 |

---

### 2.2 Mapper测试

| 测试项 | 测试步骤 | 预期结果 | 实际结果 | 状态 |
|-------|---------|---------|---------|------|
| TUserProfileMapper | 检查`TUserProfileMapper.xml` | 包含`dept_id`字段映射 | | ☐ 通过 ☐ 失败 |
| 查询SQL | 执行查询学生档案 | 返回`deptId`字段 | | ☐ 通过 ☐ 失败 |
| 插入SQL | 插入新学生档案 | 成功插入`dept_id` | | ☐ 通过 ☐ 失败 |
| 更新SQL | 更新学生档案 | 成功更新`dept_id` | | ☐ 通过 ☐ 失败 |

---

### 2.3 批量导入功能测试

| 测试项 | 测试步骤 | 预期结果 | 实际结果 | 状态 |
|-------|---------|---------|---------|------|
| 学生导入 | 导入学生Excel（角色ID=100） | 自动创建学生档案 | | ☐ 通过 ☐ 失败 |
| 档案字段填充 | 检查创建的学生档案 | 学院、专业、班级自动填充 | | ☐ 通过 ☐ 失败 |
| 年级推断 | 检查学生档案的年级字段 | 从学号推断年级（如2025级） | | ☐ 通过 ☐ 失败 |
| 教职工导入 | 导入教职工Excel（角色ID=102） | 不创建学生档案 | | ☐ 通过 ☐ 失败 |
| 重复导入 | 导入已存在的学号 | 提示已存在或更新 | | ☐ 通过 ☐ 失败 |
| 异常处理 | 导入错误的部门ID | 记录错误但不影响其他数据 | | ☐ 通过 ☐ 失败 |

**测试数据**：
```
部门编号 | 登录名称    | 用户名称 | 用户邮箱              | 手机号码    | 用户性别 | 账号状态
---------|------------|---------|----------------------|------------|---------|--------
500      | 2507240999 | 测试学生1 | test1@example.com    | 13800138999 | 0       | 0
501      | 2507240998 | 测试学生2 | test2@example.com    | 13800138998 | 1       | 0
101      | T20249999  | 测试老师1 | teacher1@example.com | 13900139999 | 0       | 0
```

---

## 三、前端功能测试

### 3.1 登录页面测试

| 测试项 | 测试步骤 | 预期结果 | 实际结果 | 状态 |
|-------|---------|---------|---------|------|
| 提示文字显示 | 打开登录页面 | 显示"学生请输入学号，教职工请输入工号" | | ☐ 通过 ☐ 失败 |
| 提示样式 | 检查提示文字样式 | 灰色、左对齐、有图标 | | ☐ 通过 ☐ 失败 |
| 学生登录 | 使用学号2507240101登录 | 登录成功 | | ☐ 通过 ☐ 失败 |
| 教职工登录 | 使用工号T20240001登录 | 登录成功 | | ☐ 通过 ☐ 失败 |
| 管理员登录 | 使用admin登录 | 登录成功 | | ☐ 通过 ☐ 失败 |

---

### 3.2 学生档案管理页面测试

| 测试项 | 测试步骤 | 预期结果 | 实际结果 | 状态 |
|-------|---------|---------|---------|------|
| 部门树加载 | 打开学生档案管理页面 | 部门树正常加载 | | ☐ 通过 ☐ 失败 |
| 新增档案 | 点击新增，选择班级 | 学院、专业、班级自动填充 | | ☐ 通过 ☐ 失败 |
| 部门树选择 | 选择不同班级 | 学院、专业、班级正确填充 | | ☐ 通过 ☐ 失败 |
| 字段禁用 | 检查学院、专业、班级字段 | 字段为禁用状态（灰色） | | ☐ 通过 ☐ 失败 |
| 保存档案 | 填写完整信息并保存 | 成功保存，deptId正确 | | ☐ 通过 ☐ 失败 |
| 修改档案 | 修改已有档案的班级 | 学院、专业、班级自动更新 | | ☐ 通过 ☐ 失败 |

---

### 3.3 用户管理页面测试

| 测试项 | 测试步骤 | 预期结果 | 实际结果 | 状态 |
|-------|---------|---------|---------|------|
| 导入按钮 | 点击导入按钮 | 弹出导入对话框 | | ☐ 通过 ☐ 失败 |
| 下载模板 | 点击下载模板 | 下载Excel模板 | | ☐ 通过 ☐ 失败 |
| 模板提示 | 打开下载的模板 | 单元格有批注提示 | | ☐ 通过 ☐ 失败 |
| 上传文件 | 上传填写好的Excel | 显示导入进度 | | ☐ 通过 ☐ 失败 |
| 导入结果 | 查看导入结果 | 显示成功/失败数量 | | ☐ 通过 ☐ 失败 |

---

## 四、集成测试

### 4.1 完整流程测试：学生批量导入

| 步骤 | 操作 | 预期结果 | 实际结果 | 状态 |
|-----|------|---------|---------|------|
| 1 | 下载用户导入模板 | 成功下载 | | ☐ 通过 ☐ 失败 |
| 2 | 填写学生信息（部门ID=500） | Excel填写完成 | | ☐ 通过 ☐ 失败 |
| 3 | 上传并导入 | 导入成功 | | ☐ 通过 ☐ 失败 |
| 4 | 检查sys_user表 | 用户创建成功 | | ☐ 通过 ☐ 失败 |
| 5 | 检查t_user_profile表 | 学生档案自动创建 | | ☐ 通过 ☐ 失败 |
| 6 | 检查档案字段 | 学院、专业、班级、年级正确 | | ☐ 通过 ☐ 失败 |
| 7 | 使用学号登录 | 登录成功 | | ☐ 通过 ☐ 失败 |
| 8 | 查看个人信息 | 信息完整正确 | | ☐ 通过 ☐ 失败 |

---

### 4.2 完整流程测试：手动创建学生档案

| 步骤 | 操作 | 预期结果 | 实际结果 | 状态 |
|-----|------|---------|---------|------|
| 1 | 进入学生档案管理 | 页面正常打开 | | ☐ 通过 ☐ 失败 |
| 2 | 点击新增 | 弹出新增对话框 | | ☐ 通过 ☐ 失败 |
| 3 | 选择所属班级（软工2401班） | 部门树正常显示 | | ☐ 通过 ☐ 失败 |
| 4 | 检查自动填充 | 学院=信息工程学院，专业=软件工程，班级=软工2401班 | | ☐ 通过 ☐ 失败 |
| 5 | 填写其他信息并保存 | 保存成功 | | ☐ 通过 ☐ 失败 |
| 6 | 查看档案列表 | 新档案显示正确 | | ☐ 通过 ☐ 失败 |
| 7 | 修改档案班级 | 学院、专业、班级自动更新 | | ☐ 通过 ☐ 失败 |

---

## 五、性能测试

### 5.1 批量导入性能测试

| 测试项 | 数据量 | 预期时间 | 实际时间 | 状态 |
|-------|-------|---------|---------|------|
| 小批量导入 | 10条 | <5秒 | | ☐ 通过 ☐ 失败 |
| 中批量导入 | 100条 | <30秒 | | ☐ 通过 ☐ 失败 |
| 大批量导入 | 500条 | <2分钟 | | ☐ 通过 ☐ 失败 |

---

### 5.2 页面加载性能测试

| 测试项 | 预期时间 | 实际时间 | 状态 |
|-------|---------|---------|------|
| 登录页面加载 | <2秒 | | ☐ 通过 ☐ 失败 |
| 学生档案列表加载 | <3秒 | | ☐ 通过 ☐ 失败 |
| 部门树加载 | <2秒 | | ☐ 通过 ☐ 失败 |

---

## 六、兼容性测试

### 6.1 浏览器兼容性

| 浏览器 | 版本 | 登录 | 学生档案管理 | 批量导入 | 状态 |
|-------|------|------|------------|---------|------|
| Chrome | 最新版 | | | | ☐ 通过 ☐ 失败 |
| Firefox | 最新版 | | | | ☐ 通过 ☐ 失败 |
| Edge | 最新版 | | | | ☐ 通过 ☐ 失败 |
| Safari | 最新版 | | | | ☐ 通过 ☐ 失败 |

---

## 七、安全测试

### 7.1 权限测试

| 测试项 | 测试步骤 | 预期结果 | 实际结果 | 状态 |
|-------|---------|---------|---------|------|
| 学生权限 | 学生登录后访问用户管理 | 无权限访问 | | ☐ 通过 ☐ 失败 |
| 辅导员权限 | 辅导员登录后访问学生档案 | 可访问本部门学生 | | ☐ 通过 ☐ 失败 |
| 管理员权限 | 管理员登录后访问所有功能 | 全部可访问 | | ☐ 通过 ☐ 失败 |

---

### 7.2 数据安全测试

| 测试项 | 测试步骤 | 预期结果 | 实际结果 | 状态 |
|-------|---------|---------|---------|------|
| 密码加密 | 检查数据库中的密码 | 密码已加密（BCrypt） | | ☐ 通过 ☐ 失败 |
| SQL注入 | 在登录框输入SQL语句 | 无法注入 | | ☐ 通过 ☐ 失败 |
| XSS攻击 | 在输入框输入脚本 | 脚本被转义 | | ☐ 通过 ☐ 失败 |

---

## 八、回归测试

### 8.1 原有功能测试

| 测试项 | 测试步骤 | 预期结果 | 实际结果 | 状态 |
|-------|---------|---------|---------|------|
| 综测填报 | 提交综测数据 | 功能正常 | | ☐ 通过 ☐ 失败 |
| 综测审核 | 审核综测数据 | 功能正常 | | ☐ 通过 ☐ 失败 |
| 综测统计 | 查看综测统计 | 功能正常 | | ☐ 通过 ☐ 失败 |
| 角色管理 | 管理角色 | 功能正常 | | ☐ 通过 ☐ 失败 |
| 菜单管理 | 管理菜单 | 功能正常 | | ☐ 通过 ☐ 失败 |

---

## 九、文档测试

### 9.1 文档完整性检查

| 文档 | 是否存在 | 内容完整 | 状态 |
|------|---------|---------|------|
| 批量导入用户指南.md | ☐ 是 ☐ 否 | ☐ 是 ☐ 否 | ☐ 通过 ☐ 失败 |
| Excel模板字段说明.md | ☐ 是 ☐ 否 | ☐ 是 ☐ 否 | ☐ 通过 ☐ 失败 |
| v2.0.0系统升级使用手册.md | ☐ 是 ☐ 否 | ☐ 是 ☐ 否 | ☐ 通过 ☐ 失败 |
| v2.0.0测试验证清单.md | ☐ 是 ☐ 否 | ☐ 是 ☐ 否 | ☐ 通过 ☐ 失败 |

---

## 十、测试总结

### 10.1 测试统计

- 总测试项：_______
- 通过项：_______
- 失败项：_______
- 通过率：_______%

### 10.2 发现的问题

| 问题编号 | 问题描述 | 严重程度 | 状态 | 备注 |
|---------|---------|---------|------|------|
| 1 | | ☐ 严重 ☐ 一般 ☐ 轻微 | ☐ 待修复 ☐ 已修复 | |
| 2 | | ☐ 严重 ☐ 一般 ☐ 轻微 | ☐ 待修复 ☐ 已修复 | |
| 3 | | ☐ 严重 ☐ 一般 ☐ 轻微 | ☐ 待修复 ☐ 已修复 | |

### 10.3 测试结论

☐ **通过**：所有测试项通过，系统可以上线  
☐ **有条件通过**：存在轻微问题，但不影响主要功能  
☐ **不通过**：存在严重问题，需要修复后重新测试

### 10.4 测试人员签字

测试人员：____________  
测试日期：____________  
审核人员：____________  
审核日期：____________

---

**文档版本**：v2.0.0  
**更新日期**：2025-11-09  
**适用系统**：学生综合测评系统（基于RuoYi-Vue）

