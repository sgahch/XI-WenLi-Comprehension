# ç­å§”å®¡æ ¸èœå•é…ç½®è¯´æ˜

## ğŸ“‹ æ¦‚è¿°

æœ¬æ–‡æ¡£è¯´æ˜å¦‚ä½•ä¸ºç­å§”è§’è‰²é…ç½®ä¸“ç”¨çš„å®¡æ ¸èœå•å’Œæƒé™ã€‚

---

## ğŸ¯ èœå•ç»“æ„

### å®Œæ•´èœå•æ ‘

```
ç»¼æµ‹å¡«æŠ¥ (menu_id=2100)
â”œâ”€â”€ æˆ‘çš„å¡«æŠ¥ (menu_id=2101) - å­¦ç”Ÿç«¯
â”œâ”€â”€ å¡«æŠ¥å†å² (menu_id=2102) - å­¦ç”Ÿç«¯
â”œâ”€â”€ ç­å§”å®¡æ ¸ (menu_id=2122) - ç­å§”ç«¯ â­ æ–°å¢
â”‚   â”œâ”€â”€ ç­å§”å®¡æ ¸æŸ¥è¯¢ (menu_id=2140) - æŒ‰é’®æƒé™
â”‚   â”œâ”€â”€ ç­å§”å®¡æ ¸é€šè¿‡ (menu_id=2141) - æŒ‰é’®æƒé™
â”‚   â”œâ”€â”€ ç­å§”å®¡æ ¸é©³å› (menu_id=2142) - æŒ‰é’®æƒé™
â”‚   â”œâ”€â”€ ç­å§”æ‰¹é‡å®¡æ ¸ (menu_id=2143) - æŒ‰é’®æƒé™
â”‚   â”œâ”€â”€ ç­å§”æŸ¥çœ‹è¯¦æƒ… (menu_id=2144) - æŒ‰é’®æƒé™
â”‚   â”œâ”€â”€ æŸ¥çœ‹æˆç»©æˆªå›¾ (menu_id=2145) - æŒ‰é’®æƒé™
â”‚   â””â”€â”€ ç­å§”å®¡æ ¸å¯¼å‡º (menu_id=2146) - æŒ‰é’®æƒé™
â”œâ”€â”€ å¡«æŠ¥å®¡æ ¸ (menu_id=2120) - è¾…å¯¼å‘˜/ç®¡ç†å‘˜ç«¯
â””â”€â”€ æˆç»©ç»Ÿè®¡ (menu_id=2121) - ç»Ÿè®¡ç«¯
```

---

## ğŸ“Š èœå•è¯¦ç»†ä¿¡æ¯

### ä¸»èœå• (menu_id=2122)

| å­—æ®µ | å€¼ | è¯´æ˜ |
|------|-----|------|
| menu_id | 2122 | èœå•ID |
| menu_name | ç­å§”å®¡æ ¸ | èœå•åç§° |
| parent_id | 2100 | çˆ¶èœå•IDï¼ˆç»¼æµ‹å¡«æŠ¥ï¼‰ |
| order_num | 3 | æ˜¾ç¤ºé¡ºåºï¼ˆåœ¨å¡«æŠ¥å†å²ä¹‹åï¼Œå¡«æŠ¥å®¡æ ¸ä¹‹å‰ï¼‰ |
| path | classCommitteeAudit | è·¯ç”±åœ°å€ |
| component | evaluation-submit/classCommittee/audit | ç»„ä»¶è·¯å¾„ |
| route_name | ClassCommitteeAudit | è·¯ç”±åç§° |
| menu_type | C | èœå•ç±»å‹ï¼ˆC=èœå•ï¼‰ |
| perms | evaluation:classCommittee:audit | æƒé™å­—ç¬¦ |
| icon | check | å›¾æ ‡ |

### æŒ‰é’®æƒé™ (menu_id=2140-2146)

| menu_id | æƒé™åç§° | æƒé™å­—ç¬¦ | è¯´æ˜ |
|---------|---------|---------|------|
| 2140 | ç­å§”å®¡æ ¸æŸ¥è¯¢ | evaluation:classCommittee:query | æŸ¥è¯¢æäº¤åˆ—è¡¨ |
| 2141 | ç­å§”å®¡æ ¸é€šè¿‡ | evaluation:classCommittee:approve | å•ä¸ªå®¡æ ¸é€šè¿‡ |
| 2142 | ç­å§”å®¡æ ¸é©³å› | evaluation:classCommittee:reject | å•ä¸ªå®¡æ ¸é©³å› |
| 2143 | ç­å§”æ‰¹é‡å®¡æ ¸ | evaluation:classCommittee:batch | æ‰¹é‡å®¡æ ¸æ“ä½œ |
| 2144 | ç­å§”æŸ¥çœ‹è¯¦æƒ… | evaluation:classCommittee:detail | æŸ¥çœ‹æäº¤è¯¦æƒ… |
| 2145 | æŸ¥çœ‹æˆç»©æˆªå›¾ | evaluation:classCommittee:viewScreenshot | æŸ¥çœ‹æˆç»©æˆªå›¾ |
| 2146 | ç­å§”å®¡æ ¸å¯¼å‡º | evaluation:classCommittee:export | å¯¼å‡ºå®¡æ ¸æ•°æ® |

---

## ğŸ”§ å®‰è£…æ­¥éª¤

### æ–¹æ³•ä¸€ï¼šæ‰§è¡Œå‡çº§è„šæœ¬ï¼ˆæ¨èï¼‰

```bash
# 1. è¿›å…¥é¡¹ç›®æ ¹ç›®å½•
cd c:\Users\Ynchen\Desktop\RuoYi-Vue

# 2. æ‰§è¡ŒSQLè„šæœ¬
mysql -u root -p ry-vue < sql/upgrade/v1.2.0_add_class_committee_audit_menu.sql
```

### æ–¹æ³•äºŒï¼šé€šè¿‡æ•°æ®åº“ç®¡ç†å·¥å…·æ‰§è¡Œ

1. æ‰“å¼€ Navicat/MySQL Workbench/phpMyAdmin
2. è¿æ¥åˆ° `ry-vue` æ•°æ®åº“
3. æ‰“å¼€æ–‡ä»¶ `sql/upgrade/v1.2.0_add_class_committee_audit_menu.sql`
4. æ‰§è¡Œå…¨éƒ¨SQLè¯­å¥

---

## âœ… éªŒè¯å®‰è£…

### 1. éªŒè¯èœå•æ˜¯å¦åˆ›å»ºæˆåŠŸ

```sql
SELECT menu_id, menu_name, parent_id, path, component, perms, menu_type 
FROM sys_menu 
WHERE menu_id BETWEEN 2122 AND 2146
ORDER BY menu_id;
```

**é¢„æœŸç»“æœ**ï¼šåº”è¯¥è¿”å› 8 æ¡è®°å½•ï¼ˆ1ä¸ªä¸»èœå• + 7ä¸ªæŒ‰é’®æƒé™ï¼‰

### 2. éªŒè¯è§’è‰²èœå•å…³è”

```sql
SELECT rm.role_id, r.role_name, rm.menu_id, m.menu_name, m.perms
FROM sys_role_menu rm
LEFT JOIN sys_role r ON rm.role_id = r.role_id
LEFT JOIN sys_menu m ON rm.menu_id = m.menu_id
WHERE rm.role_id = 101 AND rm.menu_id BETWEEN 2122 AND 2146
ORDER BY rm.menu_id;
```

**é¢„æœŸç»“æœ**ï¼šåº”è¯¥è¿”å› 8 æ¡è®°å½•ï¼Œæ˜¾ç¤ºç­å§”è§’è‰²(role_id=101)å·²å…³è”æ‰€æœ‰èœå•

### 3. å‰ç«¯éªŒè¯

1. ä½¿ç”¨ç­å§”è´¦å·ç™»å½•ç³»ç»Ÿ
2. åœ¨å·¦ä¾§èœå•æ åº”è¯¥èƒ½çœ‹åˆ°ï¼š
   ```
   ç»¼æµ‹å¡«æŠ¥
   â”œâ”€â”€ æˆ‘çš„å¡«æŠ¥
   â”œâ”€â”€ å¡«æŠ¥å†å²
   â””â”€â”€ ç­å§”å®¡æ ¸ â­ æ–°å¢
   ```
3. ç‚¹å‡»"ç­å§”å®¡æ ¸"ï¼Œåº”è¯¥èƒ½æ­£å¸¸æ‰“å¼€å®¡æ ¸é¡µé¢

---

## ğŸ¨ å‰ç«¯è·¯ç”±é…ç½®

å‰ç«¯è·¯ç”±ç”±è‹¥ä¾æ¡†æ¶è‡ªåŠ¨ç”Ÿæˆï¼Œæ— éœ€æ‰‹åŠ¨é…ç½®ã€‚ç³»ç»Ÿä¼šæ ¹æ®æ•°æ®åº“ä¸­çš„èœå•é…ç½®è‡ªåŠ¨ç”Ÿæˆè·¯ç”±ã€‚

**è‡ªåŠ¨ç”Ÿæˆçš„è·¯ç”±ç»“æ„**ï¼š

```javascript
{
  path: '/evaluation-submit',
  component: Layout,
  children: [
    {
      path: 'classCommitteeAudit',
      component: () => import('@/views/evaluation-submit/classCommittee/audit'),
      name: 'ClassCommitteeAudit',
      meta: {
        title: 'ç­å§”å®¡æ ¸',
        icon: 'check',
        perms: ['evaluation:classCommittee:audit']
      }
    }
  ]
}
```

---

## ğŸ” æƒé™æ§åˆ¶è¯´æ˜

### åç«¯æƒé™æ§åˆ¶

åœ¨Controllerä¸­ä½¿ç”¨ `@PreAuthorize` æ³¨è§£ï¼š

```java
@PreAuthorize("@ss.hasPermi('evaluation:classCommittee:audit')")
public AjaxResult list(EvaluationSubmission submission) {
    // æŸ¥è¯¢é€»è¾‘
}

@PreAuthorize("@ss.hasPermi('evaluation:classCommittee:approve')")
public AjaxResult approve(@RequestBody AuditRequest request) {
    // å®¡æ ¸é€šè¿‡é€»è¾‘
}

@PreAuthorize("@ss.hasPermi('evaluation:classCommittee:reject')")
public AjaxResult reject(@RequestBody AuditRequest request) {
    // å®¡æ ¸é©³å›é€»è¾‘
}
```

### å‰ç«¯æƒé™æ§åˆ¶

åœ¨Vueç»„ä»¶ä¸­ä½¿ç”¨ `v-hasPermi` æŒ‡ä»¤ï¼š

```vue
<el-button
  v-hasPermi="['evaluation:classCommittee:approve']"
  type="success"
  @click="handleApprove"
>
  å®¡æ ¸é€šè¿‡
</el-button>

<el-button
  v-hasPermi="['evaluation:classCommittee:reject']"
  type="danger"
  @click="handleReject"
>
  å®¡æ ¸é©³å›
</el-button>
```

---

## ğŸ“ å‘½åè§„èŒƒè¯´æ˜

### ä¸ºä»€ä¹ˆä¸ä½¿ç”¨ `t_` å‰ç¼€ï¼Ÿ

æ‚¨æˆªå›¾ä¸­çœ‹åˆ°çš„ `t_` å¼€å¤´çš„èœå•ï¼ˆå¦‚ `t_user_profile`ã€`t_appeal`ã€`t_score_record`ï¼‰æ˜¯é€šè¿‡**è‹¥ä¾ä»£ç ç”Ÿæˆå™¨**è‡ªåŠ¨ç”Ÿæˆçš„ï¼Œå®ƒä»¬å¯¹åº”çš„æ˜¯æ•°æ®åº“è¡¨åã€‚

**å‘½åè§„èŒƒå¯¹æ¯”**ï¼š

| ç±»å‹ | å‘½åè§„èŒƒ | ç¤ºä¾‹ | è¯´æ˜ |
|------|---------|------|------|
| ä»£ç ç”Ÿæˆå™¨èœå• | `t_è¡¨å` | `t_user_profile` | å¯¹åº”æ•°æ®åº“è¡¨ |
| ä¸šåŠ¡åŠŸèƒ½èœå• | åŠŸèƒ½åç§° | `submission`ã€`audit` | å¯¹åº”ä¸šåŠ¡åŠŸèƒ½ |
| è§’è‰²ä¸“ç”¨èœå• | è§’è‰²+åŠŸèƒ½ | `classCommitteeAudit` | è§’è‰²ä¸“å±åŠŸèƒ½ |

**ç­å§”å®¡æ ¸èœå•**å±äº**ä¸šåŠ¡åŠŸèƒ½èœå•**ï¼Œä¸æ˜¯æ•°æ®åº“è¡¨çš„CRUDæ“ä½œï¼Œæ‰€ä»¥ä½¿ç”¨ `classCommitteeAudit` è€Œä¸æ˜¯ `t_` å‰ç¼€ã€‚

### æƒé™å­—ç¬¦å‘½åè§„èŒƒ

```
evaluation:classCommittee:audit
   â†“           â†“          â†“
 æ¨¡å—å      è§’è‰²å     æ“ä½œå
```

**ç¤ºä¾‹**ï¼š
- `evaluation:submission:list` - å­¦ç”Ÿå¡«æŠ¥åˆ—è¡¨
- `evaluation:audit:list` - è¾…å¯¼å‘˜å®¡æ ¸åˆ—è¡¨
- `evaluation:classCommittee:audit` - ç­å§”å®¡æ ¸åˆ—è¡¨

---

## ğŸš€ ä¸‹ä¸€æ­¥å·¥ä½œ

1. âœ… æ‰§è¡ŒSQLè„šæœ¬åˆ›å»ºèœå•
2. âœ… éªŒè¯èœå•æ˜¯å¦åˆ›å»ºæˆåŠŸ
3. âœ… ä½¿ç”¨ç­å§”è´¦å·ç™»å½•æµ‹è¯•
4. â³ æµ‹è¯•å®¡æ ¸åŠŸèƒ½æ˜¯å¦æ­£å¸¸
5. â³ æµ‹è¯•æˆç»©æˆªå›¾æŸ¥çœ‹åŠŸèƒ½
6. â³ æµ‹è¯•æ‰¹é‡å®¡æ ¸åŠŸèƒ½

---

## â“ å¸¸è§é—®é¢˜

### Q1: æ‰§è¡ŒSQLåçœ‹ä¸åˆ°èœå•ï¼Ÿ

**A**: è¯·æ£€æŸ¥ï¼š
1. æ˜¯å¦ä½¿ç”¨ç­å§”è´¦å·ç™»å½•ï¼ˆrole_id=101ï¼‰
2. æ¸…é™¤æµè§ˆå™¨ç¼“å­˜å¹¶é‡æ–°ç™»å½•
3. æ£€æŸ¥ `sys_role_menu` è¡¨ä¸­æ˜¯å¦æœ‰å¯¹åº”çš„å…³è”è®°å½•

### Q2: èœå•æ˜¾ç¤ºä½†ç‚¹å‡»æŠ¥404ï¼Ÿ

**A**: è¯·æ£€æŸ¥ï¼š
1. å‰ç«¯ç»„ä»¶è·¯å¾„æ˜¯å¦æ­£ç¡®ï¼š`ruoyi-ui/src/views/evaluation-submit/classCommittee/audit.vue`
2. ç»„ä»¶æ–‡ä»¶æ˜¯å¦å­˜åœ¨
3. é‡å¯å‰ç«¯å¼€å‘æœåŠ¡å™¨

### Q3: æŒ‰é’®æƒé™ä¸ç”Ÿæ•ˆï¼Ÿ

**A**: è¯·æ£€æŸ¥ï¼š
1. åç«¯Controlleræ˜¯å¦æ·»åŠ äº† `@PreAuthorize` æ³¨è§£
2. å‰ç«¯æŒ‰é’®æ˜¯å¦æ·»åŠ äº† `v-hasPermi` æŒ‡ä»¤
3. æƒé™å­—ç¬¦æ˜¯å¦ä¸æ•°æ®åº“ä¸­çš„ä¸€è‡´

---

## ğŸ“ æŠ€æœ¯æ”¯æŒ

å¦‚æœ‰é—®é¢˜ï¼Œè¯·è”ç³»å¼€å‘å›¢é˜Ÿæˆ–æŸ¥çœ‹è‹¥ä¾æ¡†æ¶å®˜æ–¹æ–‡æ¡£ï¼š
- è‹¥ä¾å®˜ç½‘ï¼šhttp://ruoyi.vip
- è‹¥ä¾æ–‡æ¡£ï¼šhttp://doc.ruoyi.vip

---

**åˆ›å»ºæ—¶é—´**: 2025-11-02  
**ç‰ˆæœ¬**: v1.2.0  
**ä½œè€…**: AI Assistant

